// *******************************************************************************************************************************
// *******************************************************************************************************************************
//
//		Name:		modes.c
//		Purpose:	Display mode switching
//		Created:	22nd July 2023
//		Author:		Paul Robson (paul@robsons->org.uk)
//
// *******************************************************************************************************************************
// *******************************************************************************************************************************

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "gfx.h"
#include "sys_processor.h"
#include "sys_debug_system.h"
#include "debugger.h"
#include "hardware.h"
#include "modes.h"

// *******************************************************************************************************************************
//
//										Pointer to current mode handling function
//
// *******************************************************************************************************************************

int (*display_handler)(int,int,int) = mode3Handler;

int HWCallHandler(int cmd,int address,int data) {
	return (*display_handler)(cmd,address,data);
}

// *******************************************************************************************************************************
//
//													Switch mode.
//
// *******************************************************************************************************************************

void HWSetMode(int mode) {
	//printf("Mode %d\n",mode);
	switch(mode) {
		case 0:display_handler = mode0Handler;break;
		case 3:display_handler = mode3Handler;break;
	}
}